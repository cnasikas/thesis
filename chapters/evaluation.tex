%!TEX root = ../thesis.tex
\chapter{Evaluation}
\label{evaluation}

Various experiments have been made regarding the cost of saving data on the blockchain.

All experiments have been made on a MacBook Pro 2016 and on a local Ethereum testnet.

PC Specs:

\begin{enumerate}
  \item CPU: 2GHz Intel Core i5 (2 cores)
  \item Memory: 8GB 1867 MHz LPDDR3
  \item 256BG PCI-Express SSD
\end{enumerate}

Ethereum Testnet:

\begin{enumerate}
  \item Ganache CLI v6.0.3 (ganache-core: 2.0.2)
  \item Solidity 0.4.18
\end{enumerate}

\section{Store Data}
\label{evaluation:store_data}

The cost of each Opcode (operation code) of Ethereum Virtual Machine (EVM) are defined on Ethereum yellow paper~\cite{ethereum_yellowpaper}. A gas cost summarisation of basic opcodes are be shown in Table~\ref{table:opcode_gas_cost}

In particular SLOAD opcode loads a word from storage and SSTORE opcode saves a word to storage. The size of an EVM word is 32 bytes (256 bit). To store one EVM word costs 20.000 gas, \$0.072 respectively, and to store 1kb the cost is 724.664, \$2.104.

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|l|}
\hline
 Operation & Gas  & Description \\ \hline
 ADD/SUB & 3 & Arithmetic operation \\ \hline
 MUL/DIV & 5 & Arithmetic operation \\ \hline
 ADDMOD/MULMOD & 8 & Arithmetic operation \\ \hline
 AND/OR/XOR & 3 & Bitwise logic operation \\ \hline
 LT/GT/SLT/SGT/EQ & 3 & Comparison operation \\ \hline
 POP & 2 & Stack operation \\ \hline
 PUSH/DUP/SWAP & 3 & Stack operation \\ \hline
 MLOAD/MSTORE & 3 & Memory operation \\ \hline
 JUMP & 8 & Unconditional jump \\ \hline
 JUMPI & 10 & Conditional jump \\ \hline
 SLOAD & 200 & Storage operation \\ \hline
 SSTORE & 5.000 / 20.000 & Storage operation \\ \hline
 BALANCE & 400 & Get balance of an account \\ \hline
 CREATE & 32.000 & Create a new account using CREATE \\ \hline
 CALL & 25.000 & Create a new account using CALL \\ \hline
\end{tabular}
\caption{Ethereum opcodes gas costs}
\label{table:opcode_gas_cost}
\end{table}

\section{Benchmarks}
\label{evaluation:benchmarks}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|l|}
\hline
 Size & Gas  & USD \\ \hline
 32 bytes & 20.000  & \$0.037 \\ \hline
 1KB & 724.664  & \$1.357 \\ \hline
 1MB & 697.325.562  & \$1,305.393 \\ \hline
 10MB & 7.000.000.000  & \$13,104 \\ \hline
 100MB & 70.000.000.000  & \$131,040 \\ \hline
 1GB & 700.000.000.000  & \$13,104,00 \\ \hline
\end{tabular}
\captionsetup{format=hang, justification=centering}
\caption{Saving data costs.\\ ETH Price: \$942.99 (Feb 18, 2018) - Gas Price: 2 Gwei}
\label{table:bytes_usd_cost}
\end{table}

\begin{table}[!ht]
  \centering
  \begin{tabular}{|l|l|l|l|}
  \hline
  Type & Size & Gas  & USD \\ \hline
  Store raw data & 32 bytes & 34.916  & \$0.065 \\ \hline
  Store hash pointer & 32 bytes & 34.850  & \$0.065 \\ \hline
  Log raw data & 32 bytes & 25.995  & \$0.048 \\ \hline
  Log hash pointer & 32 bytes & 25.995  & \$0.048 \\ \hline
  \end{tabular}
  \captionsetup{format=hang, justification=centering}
  \caption{Comparing methods of storing data.\\ ETH Price: \$942.99 (Feb 18, 2018) - Gas Price: 2 Gwei - Data Size: 32 bytes}
  \label{table:data_store_comparison_01}
\end{table}

\begin{table}[!ht]
  \centering
  \begin{tabular}{|l|l|l|l|}
  \hline
    Type & Size & Gas  & USD \\ \hline
    Store raw data & 1KB & 724.730  & \$1.347 \\ \hline
    Store hash pointer & 32 bytes & 34.850  & \$0.065 \\ \hline
    Log raw data & 1KB & 104.310  & \$0.194 \\ \hline
    Log hash pointer & 32 bytes & 25.995  & \$0.048 \\ \hline
  \end{tabular}
  \captionsetup{format=hang, justification=centering}
  \caption{Comparing methods of storing data.\\ ETH Price: \$942.99 (Feb 18, 2018) - Gas Price: 2 Gwei - Data Size: 1KB}
  \label{table:data_store_comparison_02}
\end{table}

\begin{table}[!ht]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
      Type & Size & Gas  & USD \\ \hline
      Store raw data & 10KB & 6.668.509  & \$12.39 \\ \hline
      Store hash pointer & 32 bytes & 34.850  & \$0.065 \\ \hline
      Log raw data & 10KB & 832.604  & \$1.547 \\ \hline
      Log hash pointer & 32 bytes & 25.995  & \$0.048 \\ \hline
  \end{tabular}
  \captionsetup{format=hang, justification=centering}
  \caption{Comparing methods of storing data.\\ ETH Price: \$942.99 (Feb 18, 2018) - Gas Price: 2 Gwei - Data Size: 10KB}
  \label{table:data_store_comparison_03}
\end{table}

\begin{table}[!ht]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
    Type & Size & Gas  & USD \\ \hline
    Store raw data & 100KB & 66.454.178  & \$123.472 \\ \hline
    Store hash pointer & 32 bytes & 34.850  & \$0.065 \\ \hline
    Log raw data & 100KB & 8.186.883  & \$15.211 \\ \hline
    Log hash pointer & 32 bytes & 25.995  & \$0.048 \\ \hline
  \end{tabular}
  \captionsetup{format=hang, justification=centering}
  \caption{Comparing methods of storing data.\\ ETH Price: \$942.99 (Feb 18, 2018) - Gas Price: 2 Gwei - Data Size: 100KB}
  \label{table:data_store_comparison_04}
\end{table}


\begin{table}[!ht]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
    Type & Size & Gas  & USD \\ \hline
    Store raw data & 1MB & 666.092.228  & \$1,237.599 \\ \hline
    Store hash pointer & 32 bytes & 34.850  & \$0.065 \\ \hline
    Log raw data & 1MB & 88.857.033  & \$165.096 \\ \hline
    Log hash pointer & 32 bytes & 25.995  & \$0.048 \\ \hline
  \end{tabular}
  \captionsetup{format=hang, justification=centering}
  \caption{Comparing methods of storing data.\\ ETH Price: \$942.99 (Feb 18, 2018) - Gas Price: 2 Gwei - Data Size: 1MB}
  \label{table:data_store_comparison_05}
\end{table}
